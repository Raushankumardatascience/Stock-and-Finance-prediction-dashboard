<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Prediction Result</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="bg-gray-50 font-sans">

  <!-- Navigation -->
  <nav class="bg-blue-900 text-white shadow-lg">
    <div class="container mx-auto px-6 py-4 flex justify-between items-center">
      <div class="flex items-center space-x-2">
        <div class="w-8 h-8 bg-blue-200 rounded-full flex items-center justify-center">
          <i class="fas fa-chart-line text-blue-800"></i>
        </div>
        <span class="text-xl font-bold">QuantumAnalytics</span>
      </div>
    </div>
  </nav>

  <!-- Main Result Section -->
  <div class="container mx-auto px-4 py-10">
    <div class="bg-white shadow-md rounded-lg p-8">
      <h2 class="text-2xl font-bold mb-6 text-blue-800">ðŸ“ˆ Prediction Result using <span class="capitalize">{{ model_type }}</span> Model</h2>

      {% if error %}
        <p class="text-red-600 font-semibold">{{ error }}</p>
      {% elif forecast %}
        <p class="text-gray-700 mb-2"><strong>Ticker:</strong> {{ ticker }}</p>
        <p class="text-gray-700 mb-2"><strong>Forecasted Price(s):</strong></p>
        <ul class="list-disc list-inside text-gray-800">
          {% for price in forecast %}
            <li>{{ price|round(2) }}</li>
          {% endfor %}
        </ul>

        <!-- Chart Container -->
        <div class="mt-8">
          <canvas id="forecastChart" class="w-full h-64"></canvas>
        </div>

        <script>
          const forecastData = {{ forecast | tojson }};
          const forecastDays = forecastData.length;
          const today = new Date();
          const labels = Array.from({ length: forecastDays }, (_, i) => {
            const date = new Date(today);
            date.setDate(today.getDate() + i + 1); // Predicting for the next days
            return date.toLocaleDateString(); // Format the date
          });

          const ctx = document.getElementById('forecastChart').getContext('2d');
          new Chart(ctx, {
            type: 'line',
            data: {
              labels: labels,
              datasets: [{
                label: 'Predicted Price',
                data: forecastData,
                borderColor: '#1d4ed8',
                backgroundColor: 'rgba(29, 78, 216, 0.1)',
                borderWidth: 2,
                tension: 0.3,
                fill: true,
                pointRadius: 5,
                pointBackgroundColor: '#1d4ed8',
                pointBorderColor: '#fff',
                pointHoverRadius: 7
              }]
            },
            options: {
              responsive: true,
              plugins: {
                legend: {
                  display: true,
                  labels: { color: '#333' }
                },
                tooltip: {
                  mode: 'index',
                  intersect: false,
                  callbacks: {
                    label: function(context) {
                      return ` â‚¹${context.parsed.y.toFixed(2)}`;
                    }
                  }
                }
              },
              scales: {
                x: { title: { display: true, text: 'Date', color: '#333' } },
                y: { title: { display: true, text: 'Price (â‚¹)', color: '#333' } }
              }
            }
          });
        </script>

      {% else %}
        <p class="text-red-600 font-semibold">No forecast available.</p>
      {% endif %}

      <a href="{{ url_for('index') }}" class="inline-block mt-6 text-blue-600 hover:underline font-medium">
        ðŸ”™ Go Back
      </a>
    </div>
  </div>

  <!-- Footer -->
  <footer class="bg-blue-900 text-white py-6 mt-12">
    <div class="container mx-auto px-4 text-center">
      Â© 2025 QuantumAnalytics. All rights reserved.
    </div>
  </footer>

</body>
</html>
